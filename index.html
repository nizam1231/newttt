<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TLB</title>
    <link rel="stylesheet" href="style_index.css">
    <!-- إضافة مكتبة ethers.js -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
</head>

<body>
<header>
    <nav style="float: right;">
        <input type="checkbox" id="menu-toggle">
        <label for="menu-toggle" class="menu-icon"></label>
        <ul class="menu">
            <li><a href="index.html">HOME</a></li>
            <li><a href="Business Showcase Zone.html" href="#about">Business Showcase Zone</a></li>
            <li><a href="form.html">create zone</a></li>
            <li><a href="contact">اتصل بنا</a></li>
        </ul>
    </nav>
</header>

<h3>TLB PROJECT</h3>
<hr>

<h1>
    TLB
    <small>Project</small>
</h1>

<h4>One integrated Project<br>Furniture NFTs Tokens</h4>
<br>
<h3>- Here, we will explain to you the project idea,<br> how it started, and what TLB is.</h3>
<img src="tlb.png" alt="html tutorial" style="width:470px;height:auto; float: right;max-width:100%">

<!-- سكريبت الوظيفة -->
<script>
    const tokenAddress = '0xc00971105e61274c8a5cd5a88fe7e037d935b513';
    const tokenSymbol = 'HelloCoin';
    const tokenDecimals = 18;
    const tokenImage = 'https://assets.codepen.io/4625073/1.jpeg';

    async function addTokenAndConnectContract() {
        // التحقق من توفر window.ethereum
        if (typeof window.ethereum === 'undefined') {
            if (isMobileDevice()) {
                // توجيه المستخدم لفتح الموقع داخل متصفح MetaMask
                alert('To add the token, please open this site in the MetaMask mobile browser.');
                window.open('https://metamask.app.link/dapp/yourwebsite.com', '_blank');
            } else {
                alert('MetaMask is not installed on your browser. Please install it to use this feature.');
            }
            return;
        }

        try {
            // إضافة العملة
            console.log('Requesting to add token...');
            const wasAdded = await ethereum.request({
                method: 'wallet_watchAsset',
                params: {
                    type: 'ERC20',
                    options: {
                        address: tokenAddress,
                        symbol: tokenSymbol,
                        decimals: tokenDecimals,
                        image: tokenImage,
                    },
                },
            });

            if (wasAdded) {
                alert('Token added successfully!');
            } else {
                alert('Token addition declined.');
            }

            // الاتصال بالعقد الذكي
            console.log('Connecting to the smart contract...');
            const provider = new ethers.providers.Web3Provider(window.ethereum);
            const signer = provider.getSigner();

            // عنوان العقد وواجهة ABI
            const contractAddress = 'YOUR_SMART_CONTRACT_ADDRESS';
            const contractABI = [
                // ضع ABI الخاص بالعقد هنا
            ];

            const contract = new ethers.Contract(contractAddress, contractABI, signer);

            // استدعاء وظيفة داخل العقد كمثال
            const result = await contract.someFunction(); // استبدل بـ الوظيفة الخاصة بك
            console.log('Contract function result:', result);
            alert('Connected to contract and executed function successfully!');
        } catch (error) {
            console.error('Error in token addition or contract interaction:', error);
            alert('An error occurred. Check the console for details.');
        }
    }

    // وظيفة للتحقق من إذا كان الجهاز جهاز محمول
    function isMobileDevice() {
        return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    }
</script>

<!-- زر إضافة التوكن -->
<div style="text-align: center; margin-top: 20px;">
    <button onclick="addTokenAndConnectContract()" class="add">Add Token & Connect to Contract</button>
</div>

</body>
</html>
